<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Thomas Feldmann" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Filters - organize</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Filters";
        var mkdocs_page_input_path = "filters.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> organize
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rules/">Rules</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../locations/">Locations</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Filters</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#-how-to-exclude-filters-">- How to exclude filters -</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#created">created</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#date_added">date_added</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#date_lastused">date_lastused</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#duplicate">duplicate</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#empty">empty</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exif">exif</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#extension">extension</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#filecontent">filecontent</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#hash">hash</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#lastmodified">lastmodified</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#macos_tags">macos_tags</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mimetype">mimetype</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#name">name</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#python">python</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#regex">regex</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#size">size</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../actions/">Actions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../migrating/">Migrating from older versions</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">organize</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Filters</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tfeldmann/organize/edit/main/docs/filters.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link">#</a></h1>
<p>This page shows the specifics of each filter.</p>
<h2 id="-how-to-exclude-filters-">- How to exclude filters -<a class="headerlink" href="#-how-to-exclude-filters-" title="Permanent link">#</a></h2>
<p>To exclude a filter, prefix the filter name with <strong>not</strong> (e.g. <code>"not empty"</code>,
<code>"not extension": jpg</code>, etc).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to exclude all filters you can set the rule's <code>filter_mode</code> to <code>none</code>.</p>
</div>
<p>Example:</p>
<pre><code class="language-yaml">rules:
  # using filter_mode
  - locations: ~/Desktop
    filter_mode: &quot;none&quot; # &lt;- excludes all
    filters:
      - empty
      - name:
          endswith: &quot;2022&quot;
    actions:
      - echo: &quot;{name}&quot;

  # Exclude a single filter
  - locations: ~/Desktop
    filters:
      - not extension: jpg # &lt;- matches all non-jpgs
      - name:
          startswith: &quot;Invoice&quot;
      - not empty # &lt;- matches files with content
    actions:
      - echo: &quot;{name}&quot;
</code></pre>
<h2 id="created">created<a class="headerlink" href="#created" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches files / folders by created date</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>years</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of years</p>
              </div>
            </li>
            <li>
              <b><code>months</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of months</p>
              </div>
            </li>
            <li>
              <b><code>weeks</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of weeks</p>
              </div>
            </li>
            <li>
              <b><code>days</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of days</p>
              </div>
            </li>
            <li>
              <b><code>hours</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of hours</p>
              </div>
            </li>
            <li>
              <b><code>minutes</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of minutes</p>
              </div>
            </li>
            <li>
              <b><code>seconds</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of seconds</p>
              </div>
            </li>
            <li>
              <b><code>mode</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>either 'older' or 'newer'. 'older' matches files / folders created before
the given time, 'newer' matches files / folders created within the given
time. (default = 'older')</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p><code>{created}</code> (datetime): The datetime the file / folder was created.</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/created.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Created</span><span class="p">(</span><span class="n">TimeFilter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches files / folders by created date</span>

<span class="sd">    Attributes:</span>
<span class="sd">        years (int): specify number of years</span>
<span class="sd">        months (int): specify number of months</span>
<span class="sd">        weeks (float): specify number of weeks</span>
<span class="sd">        days (float): specify number of days</span>
<span class="sd">        hours (float): specify number of hours</span>
<span class="sd">        minutes (float): specify number of minutes</span>
<span class="sd">        seconds (float): specify number of seconds</span>
<span class="sd">        mode (str):</span>
<span class="sd">            either &#39;older&#39; or &#39;newer&#39;. &#39;older&#39; matches files / folders created before</span>
<span class="sd">            the given time, &#39;newer&#39; matches files / folders created within the given</span>
<span class="sd">            time. (default = &#39;older&#39;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        `{created}` (datetime): The datetime the file / folder was created.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;created&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_created</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Show all files on your desktop created at least 10 days ago</p>
<pre><code class="language-yaml">rules:
  - name: Show all files on your desktop created at least 10 days ago
    locations: &quot;~/Desktop&quot;
    filters:
      - created:
          days: 10
    actions:
      - echo: &quot;Was created at least 10 days ago&quot;
</code></pre>
<p>Show all files on your desktop which were created within the last 5 hours</p>
<pre><code class="language-yaml">rules:
  - name: Show all files on your desktop which were created within the last 5 hours
    locations: &quot;~/Desktop&quot;
    filters:
      - created:
          hours: 5
          mode: newer
    actions:
      - echo: &quot;Was created within the last 5 hours&quot;
</code></pre>
<p>Sort pdfs by year of creation</p>
<pre><code class="language-yaml">rules:
  - name: Sort pdfs by year of creation
    locations: &quot;~/Documents&quot;
    filters:
      - extension: pdf
      - created
    actions:
      - move: &quot;~/Documents/PDF/{created.year}/&quot;
</code></pre>
<p>Formatting the creation date</p>
<pre><code class="language-yaml">rules:
  - name: Display the creation date
    locations: &quot;~/Documents&quot;
    filters:
      - extension: pdf
      - created
    actions:
      - echo: &quot;ISO Format:   {created.strftime('%Y-%m-%d')}&quot;
      - echo: &quot;As timestamp: {created.timestamp() | int}&quot;
</code></pre>
<h2 id="date_added">date_added<a class="headerlink" href="#date_added" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches files by the time the file was added to a folder.</p>
<p><strong><code>date_added</code> is only available on macOS!</strong></p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>years</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of years</p>
              </div>
            </li>
            <li>
              <b><code>months</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of months</p>
              </div>
            </li>
            <li>
              <b><code>weeks</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of weeks</p>
              </div>
            </li>
            <li>
              <b><code>days</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of days</p>
              </div>
            </li>
            <li>
              <b><code>hours</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of hours</p>
              </div>
            </li>
            <li>
              <b><code>minutes</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of minutes</p>
              </div>
            </li>
            <li>
              <b><code>seconds</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of seconds</p>
              </div>
            </li>
            <li>
              <b><code>mode</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>either 'older' or 'newer'. 'older' matches files / folders last modified before
the given time, 'newer' matches files / folders last modified within the given
time. (default = 'older')</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p><code>{date_added}</code>: The datetime the files / folders were added.</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/date_added.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DateAdded</span><span class="p">(</span><span class="n">TimeFilter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches files by the time the file was added to a folder.</span>

<span class="sd">    **`date_added` is only available on macOS!**</span>

<span class="sd">    Attributes:</span>
<span class="sd">        years (int): specify number of years</span>
<span class="sd">        months (int): specify number of months</span>
<span class="sd">        weeks (float): specify number of weeks</span>
<span class="sd">        days (float): specify number of days</span>
<span class="sd">        hours (float): specify number of hours</span>
<span class="sd">        minutes (float): specify number of minutes</span>
<span class="sd">        seconds (float): specify number of seconds</span>
<span class="sd">        mode (str):</span>
<span class="sd">            either &#39;older&#39; or &#39;newer&#39;. &#39;older&#39; matches files / folders last modified before</span>
<span class="sd">            the given time, &#39;newer&#39; matches files / folders last modified within the given</span>
<span class="sd">            time. (default = &#39;older&#39;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        `{date_added}`: The datetime the files / folders were added.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;date_added&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;darwin&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s2">&quot;date_added is only available on macOS&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_date_added</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p>Works the same way as <a href="#created"><code>created</code></a> and <a href="#lastmodified"><code>lastmodified</code></a>.</p>
<p>** Examples **</p>
<pre><code class="language-yaml">rules:
  - name: Show the date the file was added to the folder
    locations: &quot;~/Desktop&quot;
    filters:
      - date_added
    actions:
      - echo: &quot;Date added: {date_added.strftime('%Y-%m-%d')}&quot;
</code></pre>
<h2 id="date_lastused">date_lastused<a class="headerlink" href="#date_lastused" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches files by the time the file was last used.</p>
<p><strong><code>date_lastused</code> is only available on macOS!</strong></p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>years</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of years</p>
              </div>
            </li>
            <li>
              <b><code>months</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of months</p>
              </div>
            </li>
            <li>
              <b><code>weeks</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of weeks</p>
              </div>
            </li>
            <li>
              <b><code>days</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of days</p>
              </div>
            </li>
            <li>
              <b><code>hours</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of hours</p>
              </div>
            </li>
            <li>
              <b><code>minutes</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of minutes</p>
              </div>
            </li>
            <li>
              <b><code>seconds</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of seconds</p>
              </div>
            </li>
            <li>
              <b><code>mode</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>either 'older' or 'newer'. 'older' matches files / folders last used before
the given time, 'newer' matches files / folders last used within the given
time. (default = 'older')</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p>{date_lastused}: The datetime the files / folders were added.</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/date_lastused.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DateLastUsed</span><span class="p">(</span><span class="n">TimeFilter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches files by the time the file was last used.</span>

<span class="sd">    **`date_lastused` is only available on macOS!**</span>

<span class="sd">    Attributes:</span>
<span class="sd">        years (int): specify number of years</span>
<span class="sd">        months (int): specify number of months</span>
<span class="sd">        weeks (float): specify number of weeks</span>
<span class="sd">        days (float): specify number of days</span>
<span class="sd">        hours (float): specify number of hours</span>
<span class="sd">        minutes (float): specify number of minutes</span>
<span class="sd">        seconds (float): specify number of seconds</span>
<span class="sd">        mode (str):</span>
<span class="sd">            either &#39;older&#39; or &#39;newer&#39;. &#39;older&#39; matches files / folders last used before</span>
<span class="sd">            the given time, &#39;newer&#39; matches files / folders last used within the given</span>
<span class="sd">            time. (default = &#39;older&#39;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        {date_lastused}: The datetime the files / folders were added.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;date_lastused&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;darwin&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s2">&quot;date_added is only available on macOS&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_date_lastused</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p>Works the same way as <a href="#created"><code>created</code></a> and <a href="#lastmodified"><code>lastmodified</code></a>.</p>
<p>** Examples **</p>
<pre><code class="language-yaml">rules:
  - name: Show the date the file was added to the folder
    locations: &quot;~/Desktop&quot;
    filters:
      - date_lastused
    actions:
      - echo: &quot;Date last used: {date_lastused.strftime('%Y-%m-%d')}&quot;
</code></pre>
<h2 id="duplicate">duplicate<a class="headerlink" href="#duplicate" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>A fast duplicate file finder.</p>
<p>This filter compares files byte by byte and finds identical files with potentially
different filenames.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>detect_original_by</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Detection method to distinguish between original and duplicate.
Possible values are:</p>
<ul>
<li><code>"first_seen"</code>: Whatever file is visited first is the original. This
  depends on the order of your location entries.</li>
<li><code>"name"</code>: The first entry sorted by name is the original.</li>
<li><code>"created"</code>: The first entry sorted by creation date is the original.</li>
<li><code>"lastmodified"</code>: The first file sorted by date of last modification is
   the original.</li>
</ul>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>You can reverse the sorting method by prefixing a <code>-</code>.</p>
<p>So with <code>detect_original_by: "-created"</code> the file with the older creation date is
the original and the younger file is the duplicate. This works on all methods, for
example <code>"-first_seen"</code>, <code>"-name"</code>, <code>"-created"</code>, <code>"-lastmodified"</code>.</p>
<p><strong>Returns:</strong></p>
<p><code>{duplicate.original}</code> - The path to the original</p>

            <details class="quote">
              <summary>Source code in <code>organize/filters/duplicate.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Duplicate</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A fast duplicate file finder.</span>

<span class="sd">    This filter compares files byte by byte and finds identical files with potentially</span>
<span class="sd">    different filenames.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        detect_original_by (str):</span>
<span class="sd">            Detection method to distinguish between original and duplicate.</span>
<span class="sd">            Possible values are:</span>

<span class="sd">            - `&quot;first_seen&quot;`: Whatever file is visited first is the original. This</span>
<span class="sd">              depends on the order of your location entries.</span>
<span class="sd">            - `&quot;name&quot;`: The first entry sorted by name is the original.</span>
<span class="sd">            - `&quot;created&quot;`: The first entry sorted by creation date is the original.</span>
<span class="sd">            - `&quot;lastmodified&quot;`: The first file sorted by date of last modification is</span>
<span class="sd">               the original.</span>

<span class="sd">    You can reverse the sorting method by prefixing a `-`.</span>

<span class="sd">    So with `detect_original_by: &quot;-created&quot;` the file with the older creation date is</span>
<span class="sd">    the original and the younger file is the duplicate. This works on all methods, for</span>
<span class="sd">    example `&quot;-first_seen&quot;`, `&quot;-name&quot;`, `&quot;-created&quot;`, `&quot;-lastmodified&quot;`.</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    `{duplicate.original}` - The path to the original</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">detect_original_by</span><span class="p">:</span> <span class="n">DetectionMethod</span> <span class="o">=</span> <span class="s2">&quot;first_seen&quot;</span>
    <span class="n">hash_algorithm</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sha1&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;duplicate&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># reverse original detection order if starting with &quot;-&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_original_by</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_reverse</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_original_by</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_original_by</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_reverse</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_files_for_size</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_files_for_chunk</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_file_for_hash</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="c1"># we keep track of the files we already computed the hashes for so we only do</span>
        <span class="c1"># that once.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seen_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_first_chunk_known</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_known</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="c1"># skip symlinks</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">is_symlink</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># the exact same path has already been handled. This happens if multiple</span>
        <span class="c1"># locations emit this file in a single rule or if we follow symlinks.</span>
        <span class="c1"># We skip these.</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seen_files</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seen_files</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># check for files with equal size</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">read_file_size</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">same_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files_for_size</span><span class="p">[</span><span class="n">file_size</span><span class="p">]</span>
        <span class="n">same_size</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">same_size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># the file is unique in size and cannot be a duplicate</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># for all other files with the same file size:</span>
        <span class="c1"># make sure we know their hash of their first 1024 byte chunk</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">same_size</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">f</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_chunk_known</span><span class="p">:</span>
                <span class="n">chunk_hash</span> <span class="o">=</span> <span class="n">hash_first_chunk</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_algorithm</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_first_chunk_known</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_files_for_chunk</span><span class="p">[</span><span class="n">chunk_hash</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="c1"># check first chunk hash collisions with the current file</span>
        <span class="n">chunk_hash</span> <span class="o">=</span> <span class="n">hash_first_chunk</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_algorithm</span><span class="p">)</span>
        <span class="n">same_first_chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files_for_chunk</span><span class="p">[</span><span class="n">chunk_hash</span><span class="p">]</span>
        <span class="n">same_first_chunk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_first_chunk_known</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">same_first_chunk</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># the file has a unique small hash and cannot be a duplicate</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Ensure we know the full hashes of all files with the same first chunk as</span>
        <span class="c1"># the investigated file</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">same_first_chunk</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">f</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_known</span><span class="p">:</span>
                <span class="n">hash_</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_algorithm</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_hash_known</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_file_for_hash</span><span class="p">[</span><span class="n">hash_</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>

        <span class="c1"># check full hash collisions with the current file</span>
        <span class="n">hash_</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_algorithm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_known</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">known</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file_for_hash</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hash_</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">known</span><span class="p">:</span>
            <span class="n">original</span><span class="p">,</span> <span class="n">duplicate</span> <span class="o">=</span> <span class="n">detect_original</span><span class="p">(</span>
                <span class="n">known</span><span class="o">=</span><span class="n">known</span><span class="p">,</span>
                <span class="n">new</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_by</span><span class="p">,</span>
                <span class="n">reverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_detect_original_reverse</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">known</span> <span class="o">!=</span> <span class="n">original</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_file_for_hash</span><span class="p">[</span><span class="n">hash_</span><span class="p">]</span> <span class="o">=</span> <span class="n">original</span>

            <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">duplicate</span>
            <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original</span><span class="p">}</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Show all duplicate files in your desktop and download folder (and their subfolders)</p>
<pre><code class="language-yaml">rules:
  - name: Show all duplicate files in your desktop and download folder (and their subfolders)
    locations:
      - ~/Desktop
      - ~/Downloads
    subfolders: true
    filters:
      - duplicate
    actions:
      - echo: &quot;{path} is a duplicate of {duplicate.original}&quot;
</code></pre>
<p>Check for duplicated files between Desktop and a Zip file, select original by creation date</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Check for duplicated files between Desktop and a Zip file, select original by creation date&quot;
    locations:
      - ~/Desktop
      - zip://~/Desktop/backup.zip
    filters:
      - duplicate:
          detect_original_by: &quot;created&quot;
    actions:
      - echo: &quot;Duplicate found!&quot;
</code></pre>
<h2 id="empty">empty<a class="headerlink" href="#empty" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Finds empty dirs and files</p>

            <details class="quote">
              <summary>Source code in <code>organize/filters/empty.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Empty</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds empty dirs and files&quot;&quot;&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Recursively delete empty folders</p>
<pre><code class="language-yaml">rules:
  - targets: dirs
    locations:
      - path: ~/Desktop
        max_depth: null
    filters:
      - empty
    actions:
      - delete
</code></pre>
<h2 id="exif">exif<a class="headerlink" href="#exif" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Filter by image EXIF data</p>
<p>The <code>exif</code> filter can be used as a filter as well as a way to get exif information
into your actions.</p>
<p>By default this library uses the <code>exifread</code> library. If your image format is not
supported you can install <code>exiftool</code> (exiftool.org) and set the environment variable:</p>
<pre><code>ORGANIZE_EXIFTOOL_PATH=&quot;exiftool&quot;
</code></pre>
<p>organize will then use <code>exiftool</code> to extract the EXIF data.</p>
<p>Exif fields which contain "datetime", "date" or "offsettime" in their fieldname
will have their value converted to 'datetime.datetime', 'datetime.date' and
'datetime.timedelta' respectivly.
- <code>datetime.datetime</code> : exif.image.datetime, exif.exif.datetimeoriginal, ...
- <code>datetime.date</code> : exif.gps.date, ...
- <code>datetime.timedelta</code> : exif.exif.offsettimeoriginal, exif.exif.offsettimedigitized, ...</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>lowercase_keys</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether to lowercase all EXIF keys (Default: true)</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>:returns:
    <code>{exif}</code> -- a dict of all the collected exif inforamtion available in the
    file. Typically it consists of the following tags (if present in the file):</p>
<pre><code>- ``{exif.image}`` -- information related to the main image
- ``{exif.exif}`` -- Exif information
- ``{exif.gps}`` -- GPS information
- ``{exif.interoperability}`` -- Interoperability information
</code></pre>

            <details class="quote">
              <summary>Source code in <code>organize/filters/exif.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Exif</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filter by image EXIF data</span>

<span class="sd">    The `exif` filter can be used as a filter as well as a way to get exif information</span>
<span class="sd">    into your actions.</span>

<span class="sd">    By default this library uses the `exifread` library. If your image format is not</span>
<span class="sd">    supported you can install `exiftool` (exiftool.org) and set the environment variable:</span>

<span class="sd">    ```</span>
<span class="sd">    ORGANIZE_EXIFTOOL_PATH=&quot;exiftool&quot;</span>
<span class="sd">    ```</span>

<span class="sd">    organize will then use `exiftool` to extract the EXIF data.</span>

<span class="sd">    Exif fields which contain &quot;datetime&quot;, &quot;date&quot; or &quot;offsettime&quot; in their fieldname</span>
<span class="sd">    will have their value converted to &#39;datetime.datetime&#39;, &#39;datetime.date&#39; and</span>
<span class="sd">    &#39;datetime.timedelta&#39; respectivly.</span>
<span class="sd">    - `datetime.datetime` : exif.image.datetime, exif.exif.datetimeoriginal, ...</span>
<span class="sd">    - `datetime.date` : exif.gps.date, ...</span>
<span class="sd">    - `datetime.timedelta` : exif.exif.offsettimeoriginal, exif.exif.offsettimedigitized, ...</span>

<span class="sd">    Attributes:</span>
<span class="sd">        lowercase_keys (bool): Whether to lowercase all EXIF keys (Default: true)</span>

<span class="sd">    :returns:</span>
<span class="sd">        ``{exif}`` -- a dict of all the collected exif inforamtion available in the</span>
<span class="sd">        file. Typically it consists of the following tags (if present in the file):</span>

<span class="sd">        - ``{exif.image}`` -- information related to the main image</span>
<span class="sd">        - ``{exif.exif}`` -- Exif information</span>
<span class="sd">        - ``{exif.gps}`` -- GPS information</span>
<span class="sd">        - ``{exif.interoperability}`` -- Interoperability information</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">filter_tags</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="n">lowercase_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;exif&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="n">filter_tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lowercase_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># exif filter is used differently from other filters. The **kwargs are not</span>
        <span class="c1"># filter parameters but all belong into the filter_tags dictionary to filter</span>
        <span class="c1"># for specific exif tags.</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">filter_tags</span> <span class="ow">or</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># *args are tags filtered without a value, like [&quot;gps&quot;, &quot;image.model&quot;].</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">filter_tags</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">lowercase_keys</span><span class="o">=</span><span class="n">lowercase_keys</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>

        <span class="c1"># gather the exif data in a dict</span>
        <span class="k">if</span> <span class="n">exiftool_available</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">exiftool_read</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">exifread_read</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># lowercase keys if wanted</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lowercase_keys</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">lowercase_keys_recursive</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># convert strings to datetime objects where possible</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">convert_recursive</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">parsed</span>
        <span class="k">return</span> <span class="n">matches_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_tags</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p>Show available EXIF data of your pictures</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Show available EXIF data of your pictures&quot;
    locations:
      - path: ~/Pictures
        max_depth: null
    filters:
      - exif
    actions:
      - echo: &quot;{exif}&quot;
</code></pre>
<p>Copy all images which contain GPS information while keeping subfolder structure:</p>
<pre><code class="language-yaml">rules:
  - name: &quot;GPS demo&quot;
    locations:
      - path: ~/Pictures
        max_depth: null
    filters:
      - exif: gps.gpsdate
    actions:
      - copy: ~/Pictures/with_gps/{relative_path}/
</code></pre>
<p>Filter by camera manufacturer</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Filter by camera manufacturer&quot;
    locations:
      - path: ~/Pictures
        max_depth: null
    filters:
      - exif:
          image.model: Nikon D3200
    actions:
      - move: &quot;~/Pictures/My old Nikon/&quot;
</code></pre>
<p>Sort images by camera manufacturer. This will create folders for each camera model
(for example "Nikon D3200", "iPhone 6s", "iPhone 5s", "DMC-GX80") and move the pictures
accordingly:</p>
<pre><code class="language-yaml">rules:
  - name: &quot;camera sort&quot;
    locations:
      - path: ~/Pictures
        max_depth: null
    filters:
      - extension: jpg
      - exif: image.model
    actions:
      - move: &quot;~/Pictures/{exif.image.model}/&quot;
</code></pre>
<h2 id="extension">extension<a class="headerlink" href="#extension" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Filter by file extension</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>*extensions</code></b>
                  (<code>list(str) or str</code>)
              –
              <div class="doc-md-description">
                <p>The file extensions to match (does not need to start with a colon).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p><strong>Returns:</strong></p>
<ul>
<li><code>{extension}</code>: the original file extension (without colon)</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/extension.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Extension</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filter by file extension</span>

<span class="sd">    Attributes:</span>
<span class="sd">        *extensions (list(str) or str):</span>
<span class="sd">            The file extensions to match (does not need to start with a colon).</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    - `{extension}`: the original file extension (without colon)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">extensions</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span><span class="p">)</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extension&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;extensions&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">normalize_extensions</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="n">as_list</span> <span class="o">=</span> <span class="n">convert_to_list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">normalize_extension</span><span class="p">,</span> <span class="n">flatten</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">as_list</span><span class="p">))))</span>

    <span class="k">def</span> <span class="nf">suffix_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">extensions</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">suffix</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">suffix</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">suffix</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">suffix</span><span class="p">,</span> <span class="n">normalize_extension</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extensions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Dirs not supported&quot;</span><span class="p">)</span>

        <span class="n">suffix</span><span class="p">,</span> <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix_match</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">suffix</span>
        <span class="k">return</span> <span class="n">match</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Match a single file extension</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Match a single file extension&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - extension: png
    actions:
      - echo: &quot;Found PNG file: {path}&quot;
</code></pre>
<p>Match multiple file extensions</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Match multiple file extensions&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - extension:
          - .jpg
          - jpeg
    actions:
      - echo: &quot;Found JPG file: {path}&quot;
</code></pre>
<p>Make all file extensions lowercase</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Make all file extensions lowercase&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - extension
    actions:
      - rename: &quot;{path.stem}.{extension.lower()}&quot;
</code></pre>
<p>Using extension lists (<a href="../rules/#advanced-aliases">yaml aliases</a></p>
<pre><code class="language-yaml">img_ext: &amp;img
  - png
  - jpg
  - tiff

audio_ext: &amp;audio
  - mp3
  - wav
  - ogg

rules:
  - name: &quot;Using extension lists&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - extension:
          - *img
          - *audio
    actions:
      - echo: &quot;Found media file: {path}&quot;
</code></pre>
<h2 id="filecontent">filecontent<a class="headerlink" href="#filecontent" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches file content with the given regular expression</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>expr</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The regular expression to be matched.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Any named groups (<code>(?P&lt;groupname&gt;.*)</code>) in your regular expression will
be returned like this:</p>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{filecontent.groupname}</code>: The text matched with the named group
  <code>(?P&lt;groupname&gt;)</code></li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/filecontent.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">FileContent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches file content with the given regular expression</span>

<span class="sd">    Attributes:</span>
<span class="sd">        expr (str): The regular expression to be matched.</span>

<span class="sd">    Any named groups (`(?P&lt;groupname&gt;.*)`) in your regular expression will</span>
<span class="sd">    be returned like this:</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    - `{filecontent.groupname}`: The text matched with the named group</span>
<span class="sd">      `(?P&lt;groupname&gt;)`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">expr</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?P&lt;all&gt;.*)&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;filecontent&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">textract</span>

            <span class="n">content</span> <span class="o">=</span> <span class="n">textract</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
            <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">match</span>
        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s2">&quot;textract is not installed. &quot;</span>
                <span class="s2">&quot;Install with pip install organize-tool[textract]&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="k">except</span> <span class="n">textract</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">CommandLineError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">deep_merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">match</span><span class="o">.</span><span class="n">groupdict</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Show the content of all your PDF files</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Show the content of all your PDF files&quot;
    locations: ~/Documents
    filters:
      - extension: pdf
      - filecontent
    actions:
      - echo: &quot;{filecontent}&quot;
</code></pre>
<p>Match an invoice with a regular expression and sort by customer</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Match an invoice with a regular expression and sort by customer&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - filecontent: 'Invoice.*Customer (?P&lt;customer&gt;\w+)'
    actions:
      - move: &quot;~/Documents/Invoices/{filecontent.customer}/&quot;
</code></pre>
<p>Exampe to filter the filename with respect to a valid date code.</p>
<p>The filename should start with <code>&lt;year&gt;-&lt;month&gt;-&lt;day&gt;</code>.</p>
<p>Regex:</p>
<ol>
<li>creates a placeholder variable containing the year</li>
<li>allows only years which start with 20 and are followed by 2 numbers</li>
<li>months can only have as first digit 0 or 1 and must be followed by a number</li>
<li>days can only have 0, 1,2 or 3 and must followed by number
   Note: Filter is not perfect but still.</li>
</ol>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - regex: '(?P&lt;year&gt;20\d{2})-[01]\d-[0123]\d.*'
    actions:
      - echo: &quot;Year: {regex.year}&quot;
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have trouble getting the filecontent filter to work, have a look at the
<a href="../textract-hints/">installation hints</a></p>
</div>
<h2 id="hash">hash<a class="headerlink" href="#hash" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Calculates the hash of a file.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>algorithm</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Any hashing algorithm available to python's <code>hashlib</code>.
<code>md5</code> by default.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Algorithms guaranteed to be available are
<code>shake_256</code>, <code>sha3_256</code>, <code>sha1</code>, <code>sha3_224</code>, <code>sha384</code>, <code>sha512</code>, <code>blake2b</code>,
<code>blake2s</code>, <code>sha256</code>, <code>sha224</code>, <code>shake_128</code>, <code>sha3_512</code>, <code>sha3_384</code> and <code>md5</code>.</p>
<p>Depending on your python installation and installed libs there may be additional
hash algorithms to chose from.</p>
<p>To list the available algorithms on your installation run this in a python
interpreter:</p>
<pre><code class="language-py">&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; hashlib.algorithms_available
{'shake_256', 'whirlpool', 'mdc2', 'blake2s', 'sha224', 'shake_128', 'sha3_512',
'sha3_224', 'sha384', 'md5', 'sha1', 'sha512_256', 'blake2b', 'sha256',
'sha512_224', 'ripemd160', 'sha3_384', 'md4', 'sm3', 'sha3_256', 'md5-sha1',
'sha512'}
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{hash}</code>:  The hash of the file.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/hash.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Hash</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the hash of a file.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        algorithm (str): Any hashing algorithm available to python&#39;s `hashlib`.</span>
<span class="sd">            `md5` by default.</span>

<span class="sd">    Algorithms guaranteed to be available are</span>
<span class="sd">    `shake_256`, `sha3_256`, `sha1`, `sha3_224`, `sha384`, `sha512`, `blake2b`,</span>
<span class="sd">    `blake2s`, `sha256`, `sha224`, `shake_128`, `sha3_512`, `sha3_384` and `md5`.</span>

<span class="sd">    Depending on your python installation and installed libs there may be additional</span>
<span class="sd">    hash algorithms to chose from.</span>

<span class="sd">    To list the available algorithms on your installation run this in a python</span>
<span class="sd">    interpreter:</span>

<span class="sd">    ```py</span>
<span class="sd">    &gt;&gt;&gt; import hashlib</span>
<span class="sd">    &gt;&gt;&gt; hashlib.algorithms_available</span>
<span class="sd">    {&#39;shake_256&#39;, &#39;whirlpool&#39;, &#39;mdc2&#39;, &#39;blake2s&#39;, &#39;sha224&#39;, &#39;shake_128&#39;, &#39;sha3_512&#39;,</span>
<span class="sd">    &#39;sha3_224&#39;, &#39;sha384&#39;, &#39;md5&#39;, &#39;sha1&#39;, &#39;sha512_256&#39;, &#39;blake2b&#39;, &#39;sha256&#39;,</span>
<span class="sd">    &#39;sha512_224&#39;, &#39;ripemd160&#39;, &#39;sha3_384&#39;, &#39;md4&#39;, &#39;sm3&#39;, &#39;sha3_256&#39;, &#39;md5-sha1&#39;,</span>
<span class="sd">    &#39;sha512&#39;}</span>
<span class="sd">    ```</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    - `{hash}`:  The hash of the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">algorithm</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;md5&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hash&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_algorithm</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">algo</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_algorithm</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="n">algo</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Show the hashes of your files:</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Show the hashes and size of your files&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - hash
      - size
    actions:
      - echo: &quot;{hash} {size.decimal}&quot;
</code></pre>
<h2 id="lastmodified">lastmodified<a class="headerlink" href="#lastmodified" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches files by last modified date</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>years</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of years</p>
              </div>
            </li>
            <li>
              <b><code>months</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>specify number of months</p>
              </div>
            </li>
            <li>
              <b><code>weeks</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of weeks</p>
              </div>
            </li>
            <li>
              <b><code>days</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of days</p>
              </div>
            </li>
            <li>
              <b><code>hours</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of hours</p>
              </div>
            </li>
            <li>
              <b><code>minutes</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of minutes</p>
              </div>
            </li>
            <li>
              <b><code>seconds</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>specify number of seconds</p>
              </div>
            </li>
            <li>
              <b><code>mode</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>either 'older' or 'newer'. 'older' matches files / folders last modified before
the given time, 'newer' matches files / folders last modified within the given
time. (default = 'older')</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p>{lastmodified}: The datetime the files / folders was lastmodified.</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/lastmodified.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LastModified</span><span class="p">(</span><span class="n">TimeFilter</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches files by last modified date</span>

<span class="sd">    Attributes:</span>
<span class="sd">        years (int): specify number of years</span>
<span class="sd">        months (int): specify number of months</span>
<span class="sd">        weeks (float): specify number of weeks</span>
<span class="sd">        days (float): specify number of days</span>
<span class="sd">        hours (float): specify number of hours</span>
<span class="sd">        minutes (float): specify number of minutes</span>
<span class="sd">        seconds (float): specify number of seconds</span>
<span class="sd">        mode (str):</span>
<span class="sd">            either &#39;older&#39; or &#39;newer&#39;. &#39;older&#39; matches files / folders last modified before</span>
<span class="sd">            the given time, &#39;newer&#39; matches files / folders last modified within the given</span>
<span class="sd">            time. (default = &#39;older&#39;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        {lastmodified}: The datetime the files / folders was lastmodified.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;lastmodified&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_lastmodified</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Show all files on your desktop last modified at least 10 days ago&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - lastmodified:
          days: 10
    actions:
      - echo: &quot;Was modified at least 10 days ago&quot;
</code></pre>
<p>Show all files on your desktop which were modified within the last 5 hours:</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    filters:
      - lastmodified:
          hours: 5
          mode: newer
    actions:
      - echo: &quot;Was modified within the last 5 hours&quot;
</code></pre>
<p>Sort pdfs by year of last modification</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Sort pdfs by year of last modification&quot;
    locations: &quot;~/Documents&quot;
    filters:
      - extension: pdf
      - lastmodified
    actions:
      - move: &quot;~/Documents/PDF/{lastmodified.year}/&quot;
</code></pre>
<p>Formatting the last modified date</p>
<pre><code class="language-yaml">rules:
  - name: Formatting the lastmodified date
    locations: &quot;~/Documents&quot;
    filters:
      - extension: pdf
      - lastmodified
    actions:
      - echo: &quot;ISO Format:   {lastmodified.strftime('%Y-%m-%d')}&quot;
      - echo: &quot;As timestamp: {lastmodified.timestamp() | int}&quot;
</code></pre>
<h2 id="macos_tags">macos_tags<a class="headerlink" href="#macos_tags" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Filter by macOS tags</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>tags</code></b>
                  (<code>list(str) or str</code>)
              –
              <div class="doc-md-description">
                <p>The tags to filter by</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/macos_tags.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">MacOSTags</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filter by macOS tags</span>

<span class="sd">    Attributes:</span>
<span class="sd">        tags (list(str) or str):</span>
<span class="sd">            The tags to filter by</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;macos_tags&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;darwin&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s2">&quot;The macos_tags filter is only available on macOS&quot;</span><span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_list</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">file_tags</span> <span class="o">=</span> <span class="n">list_tags</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_tags</span>
        <span class="k">return</span> <span class="n">matches_tags</span><span class="p">(</span><span class="n">filter_tags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span> <span class="n">file_tags</span><span class="o">=</span><span class="n">file_tags</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Only files with a red macOS tag&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - macos_tags: &quot;* (red)&quot;
    actions:
      - echo: &quot;File with red tag&quot;
</code></pre>
<pre><code class="language-yaml">rules:
  - name: &quot;All files tagged 'Invoice' (any color)&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - macos_tags: &quot;Invoice (*)&quot;
    actions:
      - echo: &quot;Invoice found&quot;
</code></pre>
<pre><code class="language-yaml">rules:
  - name: &quot;All files with a tag 'Invoice' (any color) or with a green tag&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - macos_tags:
          - &quot;Invoice (*)&quot;
          - &quot;* (green)&quot;
    actions:
      - echo: &quot;Match found!&quot;
</code></pre>
<pre><code class="language-yaml">rules:
  - name: &quot;Listing file tags&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - macos_tags
    actions:
      - echo: &quot;{macos_tags}&quot;
</code></pre>
<h2 id="mimetype">mimetype<a class="headerlink" href="#mimetype" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Filter by MIME type associated with the file extension.</p>
<p>Supports a single string or list of MIME type strings as argument.
The types don't need to be fully specified, for example "audio" matches everything
from "audio/midi" to "audio/quicktime".</p>
<p>You can see a list of known MIME types on your system by running this oneliner:</p>
<pre><code class="language-sh">python3 -m organize.filters.mimetype
</code></pre>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>*mimetypes</code></b>
                  (<code>list(str) or str</code>)
              –
              <div class="doc-md-description">
                <p>The MIME types to filter for.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p><strong>Returns:</strong></p>
<ul>
<li><code>{mimetype}</code>: The MIME type of the file.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/mimetype.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">MimeType</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filter by MIME type associated with the file extension.</span>

<span class="sd">    Supports a single string or list of MIME type strings as argument.</span>
<span class="sd">    The types don&#39;t need to be fully specified, for example &quot;audio&quot; matches everything</span>
<span class="sd">    from &quot;audio/midi&quot; to &quot;audio/quicktime&quot;.</span>

<span class="sd">    You can see a list of known MIME types on your system by running this oneliner:</span>

<span class="sd">    ```sh</span>
<span class="sd">    python3 -m organize.filters.mimetype</span>
<span class="sd">    ```</span>

<span class="sd">    Attributes:</span>
<span class="sd">        *mimetypes (list(str) or str): The MIME types to filter for.</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    - `{mimetype}`: The MIME type of the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mimetypes</span><span class="p">:</span> <span class="n">FlatList</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mimetype&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mimetype</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mimetype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mimetypes</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">mimetype</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mimetypes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">mimetype</span> <span class="o">=</span> <span class="n">guess_mimetype</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">mimetype</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">mimetype</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Show MIME types</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Show MIME types&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - mimetype
    actions:
      - echo: &quot;{mimetype}&quot;
</code></pre>
<p>Filter by 'image' mimetype</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Filter by 'image' mimetype&quot;
    locations: &quot;~/Downloads&quot;
    filters:
      - mimetype: image
    actions:
      - echo: &quot;This file is an image: {mimetype}&quot;
</code></pre>
<p>Filter by specific MIME type</p>
<pre><code class="language-yaml">rules:
  - name: Filter by specific MIME type
    locations: &quot;~/Desktop&quot;
    filters:
      - mimetype: application/pdf
    actions:
      - echo: &quot;Found a PDF file&quot;
</code></pre>
<p>Filter by multiple specific MIME types</p>
<pre><code class="language-yaml">rules:
  - name: Filter by multiple specific MIME types
    locations: &quot;~/Music&quot;
    filters:
      - mimetype:
          - application/pdf
          - audio/midi
    actions:
      - echo: &quot;Found Midi or PDF.&quot;
</code></pre>
<h2 id="name">name<a class="headerlink" href="#name" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Match files and folders by name</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>match</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A matching string in <a href="https://github.com/tfeldmann/simplematch">simplematch-syntax</a></p>
              </div>
            </li>
            <li>
              <b><code>startswith</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The filename must begin with the given string</p>
              </div>
            </li>
            <li>
              <b><code>contains</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The filename must contain the given string</p>
              </div>
            </li>
            <li>
              <b><code>endswith</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The filename (without extension) must end with the given string</p>
              </div>
            </li>
            <li>
              <b><code>case_sensitive</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>By default, the matching is case sensitive. Change this to False to use
case insensitive matching.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/filters/name.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Name</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match files and folders by name</span>

<span class="sd">    Attributes:</span>
<span class="sd">        match (str):</span>
<span class="sd">            A matching string in [simplematch-syntax](https://github.com/tfeldmann/simplematch)</span>

<span class="sd">        startswith (str):</span>
<span class="sd">            The filename must begin with the given string</span>

<span class="sd">        contains (str):</span>
<span class="sd">            The filename must contain the given string</span>

<span class="sd">        endswith (str):</span>
<span class="sd">            The filename (without extension) must end with the given string</span>

<span class="sd">        case_sensitive (bool):</span>
<span class="sd">            By default, the matching is case sensitive. Change this to False to use</span>
<span class="sd">            case insensitive matching.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
    <span class="n">startswith</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">contains</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">endswith</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">case_sensitive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_matcher</span> <span class="o">=</span> <span class="n">simplematch</span><span class="o">.</span><span class="n">Matcher</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">,</span>
            <span class="n">case_sensitive</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startswith</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">startswith</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contains</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endswith</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endswith</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="n">is_match</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_matcher</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">startswith</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">endswith</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">is_match</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">stem</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">ext</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_list</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">case_sensitive</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">case_sensitive</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Match all files starting with 'Invoice':</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    filters:
      - name:
          startswith: Invoice
    actions:
      - echo: &quot;This is an invoice&quot;
</code></pre>
<p>Match all files starting with 'A' end containing the string 'hole'
(case insensitive):</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    filters:
      - name:
          startswith: A
          contains: hole
          case_sensitive: false
    actions:
      - echo: &quot;Found a match.&quot;
</code></pre>
<p>Match all files starting with 'A' or 'B' containing '5' or '6' and ending with
'_end':</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    filters:
      - name:
          startswith:
            - &quot;A&quot;
            - &quot;B&quot;
          contains:
            - &quot;5&quot;
            - &quot;6&quot;
          endswith: _end
          case_sensitive: false
    actions:
      - echo: &quot;Found a match.&quot;
</code></pre>
<h2 id="python">python<a class="headerlink" href="#python" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Use python code to filter files.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>code</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The python code to execute. The code must contain a <code>return</code> statement.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p><strong>Returns:</strong></p>
<ul>
<li>If your code returns <code>False</code> or <code>None</code> the file is filtered out,
    otherwise the file is passed on to the next filters.</li>
<li><code>{python}</code> contains the returned value. If you return a dictionary (for
    example <code>return {"some_key": some_value, "nested": {"k": 2}}</code>) it will be
    accessible via dot syntax in your actions: <code>{python.some_key}</code>,
    <code>{python.nested.k}</code>.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Python</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use python code to filter files.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        code (str):</span>
<span class="sd">            The python code to execute. The code must contain a `return` statement.</span>


<span class="sd">    **Returns:**</span>

<span class="sd">    - If your code returns `False` or `None` the file is filtered out,</span>
<span class="sd">        otherwise the file is passed on to the next filters.</span>
<span class="sd">    - `{python}` contains the returned value. If you return a dictionary (for</span>
<span class="sd">        example `return {&quot;some_key&quot;: some_value, &quot;nested&quot;: {&quot;k&quot;: 2}}`) it will be</span>
<span class="sd">        accessible via dot syntax in your actions: `{python.some_key}`,</span>
<span class="sd">        `{python.nested.k}`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">must_have_return_statement</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;return&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No return statement found in your code!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__usercode__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">print</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">_output_msg</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">,</span> <span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            the print function for the use code needs to print via the current output</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span>
                <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="si">}{</span><span class="n">end</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># codegen the user function with arguments as available in the resource</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">func</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;def __userfunc(print, </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">func</span> <span class="o">+=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="s2">&quot;    &quot;</span><span class="p">)</span>
        <span class="n">func</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">self.__usercode__ = __userfunc&quot;</span>

        <span class="n">exec</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usercode__</span><span class="p">(</span><span class="nb">print</span><span class="o">=</span><span class="n">_output_msg</span><span class="p">,</span> <span class="o">**</span><span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">res</span><span class="o">.</span><span class="n">deep_merge</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: A file name reverser.
    locations: ~/Documents
    filters:
      - extension
      - python: |
          return {&quot;reversed_name&quot;: path.stem[::-1]}
    actions:
      - rename: &quot;{python.reversed_name}.{extension}&quot;
</code></pre>
<p>A filter for odd student numbers. Assuming the folder <code>~/Students</code> contains
the files <code>student-01.jpg</code>, <code>student-01.txt</code>, <code>student-02.txt</code> and
<code>student-03.txt</code> this rule will print
<code>"Odd student numbers: student-01.txt"</code> and
<code>"Odd student numbers: student-03.txt"</code></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Filter odd student numbers&quot;
    locations: ~/Students/
    filters:
      - python: |
          return int(path.stem.split('-')[1]) % 2 == 1
    actions:
      - echo: &quot;Odd student numbers: {path.name}&quot;
</code></pre>
<p>Advanced usecase. You can access data from previous filters in your python code.
This can be used to match files and capturing names with a regular expression
and then renaming the files with the output of your python script.</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Access placeholders in python filter&quot;
    locations: files
    filters:
      - extension: txt
      - regex: (?P&lt;firstname&gt;\w+)-(?P&lt;lastname&gt;\w+)\..*
      - python: |
          emails = {
              &quot;Betts&quot;: &quot;dbetts@mail.de&quot;,
              &quot;Cornish&quot;: &quot;acornish@google.com&quot;,
              &quot;Bean&quot;: &quot;dbean@aol.com&quot;,
              &quot;Frey&quot;: &quot;l-frey@frey.org&quot;,
          }
          if regex.lastname in emails: # get emails from wherever
              return {&quot;mail&quot;: emails[regex.lastname]}
    actions:
      - rename: &quot;{python.mail}.txt&quot;
</code></pre>
<p>Result:</p>
<ul>
<li><code>Devonte-Betts.txt</code> becomes <code>dbetts@mail.de.txt</code></li>
<li><code>Alaina-Cornish.txt</code> becomes <code>acornish@google.com.txt</code></li>
<li><code>Dimitri-Bean.txt</code> becomes <code>dbean@aol.com.txt</code></li>
<li><code>Lowri-Frey.txt</code> becomes <code>l-frey@frey.org.txt</code></li>
<li><code>Someunknown-User.txt</code> remains unchanged because the email is not found</li>
</ul>
<h2 id="regex">regex<a class="headerlink" href="#regex" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches filenames with the given regular expression</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>expr</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The regular expression to be matched.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p><strong>Returns:</strong></p>
<p>Any named groups in your regular expression will be returned like this:</p>
<ul>
<li><code>{regex.groupname}</code>: The text matched with the named
  group <code>(?P&lt;groupname&gt;.*)</code></li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/regex.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Regex</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches filenames with the given regular expression</span>

<span class="sd">    Attributes:</span>
<span class="sd">        expr (str): The regular expression to be matched.</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    Any named groups in your regular expression will be returned like this:</span>

<span class="sd">    - `{regex.groupname}`: The text matched with the named</span>
<span class="sd">      group `(?P&lt;groupname&gt;.*)`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">expr</span><span class="p">:</span> <span class="nb">str</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;regex&quot;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">deep_merge</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">match</span><span class="o">.</span><span class="n">groupdict</span><span class="p">())</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Match an invoice with a regular expression:</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    filters:
      - regex: '^RG(\d{12})-sig\.pdf$'
    actions:
      - move: &quot;~/Documents/Invoices/1und1/&quot;
</code></pre>
<p>Match and extract data from filenames with regex named groups:
This is just like the previous example but we rename the invoice using
the invoice number extracted via the regular expression and the named
group <code>the_number</code>.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - regex: '^RG(?P&lt;the_number&gt;\d{12})-sig\.pdf$'
    actions:
      - move: ~/Documents/Invoices/1und1/{regex.the_number}.pdf
</code></pre>
<h2 id="size">size<a class="headerlink" href="#size" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Matches files and folders by size</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>*conditions</code></b>
                  (<code>list(str) or str</code>)
              –
              <div class="doc-md-description">
                <p>The size constraints.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Accepts file size conditions, e.g: <code>"&gt;= 500 MB"</code>, <code>"&lt; 20k"</code>, <code>"&gt;0"</code>,
<code>"= 10 KiB"</code>.</p>
<p>It is possible to define both lower and upper conditions like this:
<code>"&gt;20k, &lt; 1 TB"</code>, <code>"&gt;= 20 Mb, &lt;25 Mb"</code>. The filter will match if all given
conditions are satisfied.</p>
<ul>
<li>Accepts all units from KB to YB.</li>
<li>If no unit is given, kilobytes are assumend.</li>
<li>If binary prefix is given (KiB, GiB) the size is calculated using base 1024.</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{size.bytes}</code>: (int) Size in bytes</li>
<li><code>{size.traditional}</code>: (str) Size with unit (powers of 1024, JDEC prefixes)</li>
<li><code>{size.binary}</code>: (str) Size with unit (powers of 1024, IEC prefixes)</li>
<li><code>{size.decimal}</code>: (str) Size with unit (powers of 1000, SI prefixes)</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/filters/size.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Size</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Matches files and folders by size</span>

<span class="sd">    Attributes:</span>
<span class="sd">        *conditions (list(str) or str):</span>
<span class="sd">            The size constraints.</span>

<span class="sd">    Accepts file size conditions, e.g: `&quot;&gt;= 500 MB&quot;`, `&quot;&lt; 20k&quot;`, `&quot;&gt;0&quot;`,</span>
<span class="sd">    `&quot;= 10 KiB&quot;`.</span>

<span class="sd">    It is possible to define both lower and upper conditions like this:</span>
<span class="sd">    `&quot;&gt;20k, &lt; 1 TB&quot;`, `&quot;&gt;= 20 Mb, &lt;25 Mb&quot;`. The filter will match if all given</span>
<span class="sd">    conditions are satisfied.</span>

<span class="sd">    - Accepts all units from KB to YB.</span>
<span class="sd">    - If no unit is given, kilobytes are assumend.</span>
<span class="sd">    - If binary prefix is given (KiB, GiB) the size is calculated using base 1024.</span>

<span class="sd">    **Returns:**</span>

<span class="sd">    - `{size.bytes}`: (int) Size in bytes</span>
<span class="sd">    - `{size.traditional}`: (str) Size with unit (powers of 1024, JDEC prefixes)</span>
<span class="sd">    - `{size.binary}`: (str) Size with unit (powers of 1024, IEC prefixes)</span>
<span class="sd">    - `{size.decimal}`: (str) Size with unit (powers of 1000, SI prefixes)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conditions</span><span class="p">:</span> <span class="n">FlatList</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="n">filter_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">FilterConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">FilterConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="n">create_constraints</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filesize</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">filesize</span><span class="p">,</span> <span class="n">c_size</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span><span class="p">,</span> <span class="n">c_size</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="nb">bytes</span> <span class="o">=</span> <span class="n">read_resource_size</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
            <span class="s2">&quot;traditional&quot;</span><span class="p">:</span> <span class="n">traditional</span><span class="p">(</span><span class="nb">bytes</span><span class="p">),</span>
            <span class="s2">&quot;binary&quot;</span><span class="p">:</span> <span class="n">binary</span><span class="p">(</span><span class="nb">bytes</span><span class="p">),</span>
            <span class="s2">&quot;decimal&quot;</span><span class="p">:</span> <span class="n">decimal</span><span class="p">(</span><span class="nb">bytes</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Trash big downloads:</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Downloads&quot;
    targets: files
    filters:
      - size: &quot;&gt; 0.5 GB&quot;
    actions:
      - trash
</code></pre>
<p>Move all JPEGS bigger &gt; 1MB and &lt;10 MB. Search all subfolders and keep the
original relative path.</p>
<pre><code class="language-yaml">rules:
  - locations:
      - path: &quot;~/Pictures&quot;
        max_depth: null
    filters:
      - extension:
          - jpg
          - jpeg
      - size: &quot;&gt;1mb, &lt;10mb&quot;
    actions:
      - move: &quot;~/Pictures/sorted/{relative_path}/&quot;
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../locations/" class="btn btn-neutral float-left" title="Locations"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../actions/" class="btn btn-neutral float-right" title="Actions">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tfeldmann/organize/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../locations/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../actions/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
