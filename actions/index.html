<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Thomas Feldmann" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Actions - organize</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Actions";
        var mkdocs_page_input_path = "actions.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> organize
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rules/">Rules</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../locations/">Locations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../filters/">Filters</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Actions</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#confirm">confirm</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#copy">copy</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#delete">delete</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#echo">echo</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#hardlink">hardlink</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#macos_tags">macos_tags</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#move">move</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#python">python</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rename">rename</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#shell">shell</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#symlink">symlink</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#trash">trash</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#write">write</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../migrating/">Migrating from older versions</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">organize</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Actions</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tfeldmann/organize/edit/main/docs/actions.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="actions">Actions<a class="headerlink" href="#actions" title="Permanent link">#</a></h1>
<p>This page shows the specifics of each action. For basic action usage and options have a
look at the <a href="../rules/">Rules</a> section.</p>
<h2 id="confirm">confirm<a class="headerlink" href="#confirm" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Ask for confirmation before continuing.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/confirm.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Confirm</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ask for confirmation before continuing.&quot;&quot;&quot;</span>

    <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Continue?&quot;</span>
    <span class="n">default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;confirm&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_msg</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_msg</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">(</span><span class="s2">&quot;Aborted&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples</strong></p>
<p>Confirm before deleting a duplicate</p>
<pre><code class="language-yaml">rules:
  - name: &quot;Delete duplicates with confirmation&quot;
    locations:
      - ~/Downloads
      - ~/Documents
    filters:
      - not empty
      - duplicate
      - name
    actions:
      - confirm: &quot;Delete {name}?&quot;
      - trash
</code></pre>
<h2 id="copy">copy<a class="headerlink" href="#copy" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Copy a file or dir to a new location.</p>
<p>If the specified path does not exist it will be created.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dest</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The destination where the file / dir should be copied to.
If <code>dest</code> ends with a slash, it is assumed to be a target directory
and the file / dir will be copied into <code>dest</code> and keep its name.</p>
              </div>
            </li>
            <li>
              <b><code>on_conflict</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>What should happen in case <strong>dest</strong> already exists.
One of <code>skip</code>, <code>overwrite</code>, <code>trash</code>, <code>rename_new</code> and <code>rename_existing</code>.
Defaults to <code>rename_new</code>.</p>
              </div>
            </li>
            <li>
              <b><code>rename_template</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A template for renaming the file / dir in case of a conflict.
Defaults to <code>{name} {counter}{extension}</code>.</p>
              </div>
            </li>
            <li>
              <b><code>autodetect_folder</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>In case you forget the ending slash "/" to indicate copying into a folder
this settings will handle targets without a file extension as folders.
If you really mean to copy to a file without file extension, set this to
false.
Defaults to True.</p>
              </div>
            </li>
            <li>
              <b><code>continue_with</code></b>
                  (<code>str) = &#34;copy&#34; | &#34;original&#34;</code>)
              –
              <div class="doc-md-description">
                <p>Continue the next action either with the path to the copy or the path the
original.
Defaults to "copy".</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>The next action will work with the created copy.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/copy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Copy</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copy a file or dir to a new location.</span>

<span class="sd">    If the specified path does not exist it will be created.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dest (str):</span>
<span class="sd">            The destination where the file / dir should be copied to.</span>
<span class="sd">            If `dest` ends with a slash, it is assumed to be a target directory</span>
<span class="sd">            and the file / dir will be copied into `dest` and keep its name.</span>

<span class="sd">        on_conflict (str):</span>
<span class="sd">            What should happen in case **dest** already exists.</span>
<span class="sd">            One of `skip`, `overwrite`, `trash`, `rename_new` and `rename_existing`.</span>
<span class="sd">            Defaults to `rename_new`.</span>

<span class="sd">        rename_template (str):</span>
<span class="sd">            A template for renaming the file / dir in case of a conflict.</span>
<span class="sd">            Defaults to `{name} {counter}{extension}`.</span>

<span class="sd">        autodetect_folder (bool):</span>
<span class="sd">            In case you forget the ending slash &quot;/&quot; to indicate copying into a folder</span>
<span class="sd">            this settings will handle targets without a file extension as folders.</span>
<span class="sd">            If you really mean to copy to a file without file extension, set this to</span>
<span class="sd">            false.</span>
<span class="sd">            Defaults to True.</span>

<span class="sd">        continue_with (str) = &quot;copy&quot; | &quot;original&quot;:</span>
<span class="sd">            Continue the next action either with the path to the copy or the path the</span>
<span class="sd">            original.</span>
<span class="sd">            Defaults to &quot;copy&quot;.</span>

<span class="sd">    The next action will work with the created copy.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">on_conflict</span><span class="p">:</span> <span class="n">ConflictMode</span> <span class="o">=</span> <span class="s2">&quot;rename_new&quot;</span>
    <span class="n">rename_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> </span><span class="si">{counter}{extension}</span><span class="s2">&quot;</span>
    <span class="n">autodetect_folder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">continue_with</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span> <span class="s2">&quot;original&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;copy&quot;</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dest</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_template</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">rendered</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dest</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>

        <span class="c1"># fully resolve the destination for folder targets and prepare the folder</span>
        <span class="c1"># structure</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="n">prepare_target_path</span><span class="p">(</span>
            <span class="n">src_name</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">rendered</span><span class="p">,</span>
            <span class="n">autodetect_folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autodetect_folder</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Resolve conflicts before copying the file to the destination</span>
        <span class="n">skip_action</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">resolve_conflict</span><span class="p">(</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">,</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">conflict_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_conflict</span><span class="p">,</span>
            <span class="n">rename_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">skip_action</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Copy to </span><span class="si">{</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">walker_skip_pathes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">)</span>

        <span class="c1"># continue with either the original path or the path to the copy</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">continue_with</span> <span class="o">==</span> <span class="s2">&quot;copy&quot;</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">dst</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Copy all pdfs into <code>~/Desktop/somefolder/</code> and keep filenames</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - extension: pdf
    actions:
      - copy: &quot;~/Desktop/somefolder/&quot;
</code></pre>
<p>Use a placeholder to copy all .pdf files into a "PDF" folder and all .jpg files into a "JPG" folder. Existing files will be overwritten.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - extension:
          - pdf
          - jpg
    actions:
      - copy:
          dest: &quot;~/Desktop/{extension.upper()}/&quot;
          on_conflict: overwrite
</code></pre>
<p>Copy into the folder <code>Invoices</code>. Keep the filename but do not overwrite existing files.
To prevent overwriting files, an index is added to the filename, so <code>somefile.jpg</code> becomes <code>somefile 2.jpg</code>.
The counter separator is <code>' '</code> by default, but can be changed using the <code>counter_separator</code> property.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop/Invoices
    filters:
      - extension:
          - pdf
    actions:
      - copy:
          dest: &quot;~/Documents/Invoices/&quot;
          on_conflict: &quot;rename_new&quot;
          rename_template: &quot;{name} {counter}{extension}&quot;
</code></pre>
<h2 id="delete">delete<a class="headerlink" href="#delete" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Delete a file from disk.</p>
<p>Deleted files have no recovery option!
Using the <code>Trash</code> action is strongly advised for most use-cases!</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/delete.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Delete</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete a file from disk.</span>

<span class="sd">    Deleted files have no recovery option!</span>
<span class="sd">    Using the `Trash` action is strongly advised for most use-cases!</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">delete</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Delete old downloads.</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Downloads&quot;
    filters:
      - lastmodified:
          days: 365
      - extension:
          - png
          - jpg
    actions:
      - delete
</code></pre>
<p>Delete all empty subfolders</p>
<pre><code class="language-yaml">rules:
  - name: Delete all empty subfolders
    locations:
      - path: &quot;~/Downloads&quot;
        max_depth: null
    targets: dirs
    filters:
      - empty
    actions:
      - delete
</code></pre>
<h2 id="echo">echo<a class="headerlink" href="#echo" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Prints the given message.</p>
<p>This can be useful to test your rules, especially in combination with placeholder
variables.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>msg</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The message to print. Accepts placeholder variables.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/actions/echo.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Echo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prints the given message.</span>

<span class="sd">    This can be useful to test your rules, especially in combination with placeholder</span>
<span class="sd">    variables.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        msg (str): The message to print. Accepts placeholder variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_msg_templ</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_msg_templ</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">full_msg</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Find files older than a year&quot;
    locations: ~/Desktop
    filters:
      - lastmodified:
          days: 365
    actions:
      - echo: &quot;Found old file&quot;
</code></pre>
<p>Prints "Hello World!" and filepath for each file on the desktop:</p>
<pre><code class="language-yaml">rules:
  - locations:
      - ~/Desktop
    actions:
      - echo: &quot;Hello World! {path}&quot;
</code></pre>
<p>This will print something like <code>Found a ZIP: "backup"</code> for each file on your desktop</p>
<pre><code class="language-yaml">rules:
  - locations:
      - ~/Desktop
    filters:
      - extension
      - name
    actions:
      - echo: 'Found a {extension.upper()}: &quot;{name}&quot;'
</code></pre>
<p>Show the <code>{relative_path}</code> and <code>{path}</code> of all files in '~/Downloads', '~/Desktop' and their subfolders:</p>
<pre><code class="language-yaml">rules:
  - locations:
      - path: ~/Desktop
        max_depth: null
      - path: ~/Downloads
        max_depth: null
    actions:
      - echo: &quot;Path:     {path}&quot;
      - echo: &quot;Relative: {relative_path}&quot;
</code></pre>
<h2 id="hardlink">hardlink<a class="headerlink" href="#hardlink" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Create a hardlink.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dest</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The hardlink destination. If <strong>dest</strong> ends with a slash `/``, create the
hardlink in the given directory. Can contain placeholders.</p>
              </div>
            </li>
            <li>
              <b><code>on_conflict</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>What should happen in case <strong>dest</strong> already exists.
One of <code>skip</code>, <code>overwrite</code>, <code>trash</code>, <code>rename_new</code> and <code>rename_existing</code>.
Defaults to <code>rename_new</code>.</p>
              </div>
            </li>
            <li>
              <b><code>rename_template</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A template for renaming the file / dir in case of a conflict.
Defaults to <code>{name} {counter}{extension}</code>.</p>
              </div>
            </li>
            <li>
              <b><code>autodetect_folder</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>In case you forget the ending slash "/" to indicate copying into a folder
this settings will handle targets without a file extension as folders.
If you really mean to copy to a file without file extension, set this to
false.
Default: true</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/actions/hardlink.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Hardlink</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a hardlink.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dest (str):</span>
<span class="sd">            The hardlink destination. If **dest** ends with a slash `/``, create the</span>
<span class="sd">            hardlink in the given directory. Can contain placeholders.</span>

<span class="sd">        on_conflict (str):</span>
<span class="sd">            What should happen in case **dest** already exists.</span>
<span class="sd">            One of `skip`, `overwrite`, `trash`, `rename_new` and `rename_existing`.</span>
<span class="sd">            Defaults to `rename_new`.</span>

<span class="sd">        rename_template (str):</span>
<span class="sd">            A template for renaming the file / dir in case of a conflict.</span>
<span class="sd">            Defaults to `{name} {counter}{extension}`.</span>

<span class="sd">        autodetect_folder (bool):</span>
<span class="sd">            In case you forget the ending slash &quot;/&quot; to indicate copying into a folder</span>
<span class="sd">            this settings will handle targets without a file extension as folders.</span>
<span class="sd">            If you really mean to copy to a file without file extension, set this to</span>
<span class="sd">            false.</span>
<span class="sd">            Default: true</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">on_conflict</span><span class="p">:</span> <span class="n">ConflictMode</span> <span class="o">=</span> <span class="s2">&quot;rename_new&quot;</span>
    <span class="n">rename_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> </span><span class="si">{counter}{extension}</span><span class="s2">&quot;</span>
    <span class="n">autodetect_folder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hardlink&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dest</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_template</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">rendered</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dest</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="n">prepare_target_path</span><span class="p">(</span>
            <span class="n">src_name</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">rendered</span><span class="p">,</span>
            <span class="n">autodetect_folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autodetect_folder</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">skip_action</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">resolve_conflict</span><span class="p">(</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">,</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">conflict_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_conflict</span><span class="p">,</span>
            <span class="n">rename_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">skip_action</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Creating hardlink at </span><span class="si">{</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">create_hardlink</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">dst</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">walker_skip_pathes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><h2 id="macos_tags">macos_tags<a class="headerlink" href="#macos_tags" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Add macOS tags.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>*tags</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A list of tags or a single tag.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>The color can be specified in brackets after the tag name, for example:</p>
<pre><code class="language-yaml">macos_tags: &quot;Invoices (red)&quot;
</code></pre>
<p>Available colors are <code>none</code>, <code>gray</code>, <code>green</code>, <code>purple</code>, <code>blue</code>, <code>yellow</code>, <code>red</code> and
<code>orange</code>.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/macos_tags.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">MacOSTags</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add macOS tags.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        *tags (str): A list of tags or a single tag.</span>

<span class="sd">    The color can be specified in brackets after the tag name, for example:</span>

<span class="sd">    ```yaml</span>
<span class="sd">    macos_tags: &quot;Invoices (red)&quot;</span>
<span class="sd">    ```</span>

<span class="sd">    Available colors are `none`, `gray`, `green`, `purple`, `blue`, `yellow`, `red` and</span>
<span class="sd">    `orange`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tags</span><span class="p">:</span> <span class="n">FlatList</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;macos_tags&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">!=</span> <span class="s2">&quot;darwin&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s2">&quot;The macos_tags action is only available on macOS&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">macos_tags</span>

        <span class="n">COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">macos_tags</span><span class="o">.</span><span class="n">Color</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="p">:</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">color</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">COLORS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;color </span><span class="si">%s</span><span class="s2"> is unknown. (Available: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="s2">&quot; / &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">COLORS</span><span class="p">))</span>
                <span class="p">)</span>

            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span>
                <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Adding tag: &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; (color: </span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
                <span class="n">_tag</span> <span class="o">=</span> <span class="n">macos_tags</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">macos_tags</span><span class="o">.</span><span class="n">Color</span><span class="p">[</span><span class="n">color</span><span class="o">.</span><span class="n">upper</span><span class="p">()],</span>
                <span class="p">)</span>  <span class="c1"># type: ignore</span>
                <span class="n">macos_tags</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_tag</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_parse_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;parse a tag definition and return a tuple (name, color)&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> (</span><span class="si">{color}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;add a single tag&quot;
    locations: &quot;~/Documents/Invoices&quot;
    filters:
      - name:
          startswith: &quot;Invoice&quot;
      - extension: pdf
    actions:
      - macos_tags: Invoice
</code></pre>
<p>Adding multiple tags ("Invoice" and "Important")</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Documents/Invoices&quot;
    filters:
      - name:
          startswith: &quot;Invoice&quot;
      - extension: pdf
    actions:
      - macos_tags:
          - Important
          - Invoice
</code></pre>
<p>Specify tag colors</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Documents/Invoices&quot;
    filters:
      - name:
          startswith: &quot;Invoice&quot;
      - extension: pdf
    actions:
      - macos_tags:
          - Important (green)
          - Invoice (purple)
</code></pre>
<p>Add a templated tag with color</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Documents/Invoices&quot;
    filters:
      - created
    actions:
      - macos_tags:
          - Year-{created.year} (red)
</code></pre>
<h2 id="move">move<a class="headerlink" href="#move" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Move a file to a new location.</p>
<p>The file can also be renamed.
If the specified path does not exist it will be created.</p>
<p>If you only want to rename the file and keep the folder, it is
easier to use the <code>rename</code> action.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dest</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The destination where the file / dir should be moved to.
If <code>dest</code> ends with a slash, it is assumed to be a target directory
and the file / dir will be moved into <code>dest</code> and keep its name.</p>
              </div>
            </li>
            <li>
              <b><code>on_conflict</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>What should happen in case <strong>dest</strong> already exists.
One of <code>skip</code>, <code>overwrite</code>, <code>trash</code>, <code>rename_new</code> and <code>rename_existing</code>.
Defaults to <code>rename_new</code>.</p>
              </div>
            </li>
            <li>
              <b><code>rename_template</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A template for renaming the file / dir in case of a conflict.
Defaults to <code>{name} {counter}{extension}</code>.</p>
              </div>
            </li>
            <li>
              <b><code>autodetect_folder</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>In case you forget the ending slash "/" to indicate moving into a folder
this settings will handle targets without a file extension as folders.
If you really mean to move to a file without file extension, set this to
false.
Default: True</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>The next action will work with the moved file / dir.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/move.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Move</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Move a file to a new location.</span>

<span class="sd">    The file can also be renamed.</span>
<span class="sd">    If the specified path does not exist it will be created.</span>

<span class="sd">    If you only want to rename the file and keep the folder, it is</span>
<span class="sd">    easier to use the `rename` action.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dest (str):</span>
<span class="sd">            The destination where the file / dir should be moved to.</span>
<span class="sd">            If `dest` ends with a slash, it is assumed to be a target directory</span>
<span class="sd">            and the file / dir will be moved into `dest` and keep its name.</span>

<span class="sd">        on_conflict (str):</span>
<span class="sd">            What should happen in case **dest** already exists.</span>
<span class="sd">            One of `skip`, `overwrite`, `trash`, `rename_new` and `rename_existing`.</span>
<span class="sd">            Defaults to `rename_new`.</span>

<span class="sd">        rename_template (str):</span>
<span class="sd">            A template for renaming the file / dir in case of a conflict.</span>
<span class="sd">            Defaults to `{name} {counter}{extension}`.</span>

<span class="sd">        autodetect_folder (bool):</span>
<span class="sd">            In case you forget the ending slash &quot;/&quot; to indicate moving into a folder</span>
<span class="sd">            this settings will handle targets without a file extension as folders.</span>
<span class="sd">            If you really mean to move to a file without file extension, set this to</span>
<span class="sd">            false.</span>
<span class="sd">            Default: True</span>

<span class="sd">    The next action will work with the moved file / dir.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">on_conflict</span><span class="p">:</span> <span class="n">ConflictMode</span> <span class="o">=</span> <span class="s2">&quot;rename_new&quot;</span>
    <span class="n">rename_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> </span><span class="si">{counter}{extension}</span><span class="s2">&quot;</span>
    <span class="n">autodetect_folder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;move&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dest</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_template</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">rendered</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dest</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>

        <span class="c1"># fully resolve the destination for folder targets and prepare the folder</span>
        <span class="c1"># structure</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="n">prepare_target_path</span><span class="p">(</span>
            <span class="n">src_name</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">rendered</span><span class="p">,</span>
            <span class="n">autodetect_folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autodetect_folder</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Resolve conflicts before moving the file to the destination</span>
        <span class="n">skip_action</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">resolve_conflict</span><span class="p">(</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">,</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">conflict_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_conflict</span><span class="p">,</span>
            <span class="n">rename_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">skip_action</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Move to </span><span class="si">{</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">walker_skip_pathes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">)</span>

        <span class="c1"># continue with the new path</span>
        <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">dst</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>Move all pdfs and jpgs from the desktop into the folder "~/Desktop/media/". Filenames are not changed.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - extension:
          - pdf
          - jpg
    actions:
      - move: &quot;~/Desktop/media/&quot;
</code></pre>
<p>Use a placeholder to move all .pdf files into a "PDF" folder and all .jpg files into a
"JPG" folder. Existing files will be overwritten.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - extension:
          - pdf
          - jpg
    actions:
      - move:
          dest: &quot;~/Desktop/{extension.upper()}/&quot;
          on_conflict: &quot;overwrite&quot;
</code></pre>
<p>Move pdfs into the folder <code>Invoices</code>. Keep the filename but do not overwrite existing files. To prevent overwriting files, an index is added to the filename, so <code>somefile.jpg</code> becomes <code>somefile 2.jpg</code>.</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop/Invoices
    filters:
      - extension:
          - pdf
    actions:
      - move:
          dest: &quot;~/Documents/Invoices/&quot;
          on_conflict: &quot;rename_new&quot;
          rename_template: &quot;{name} {counter}{extension}&quot;
</code></pre>
<h2 id="python">python<a class="headerlink" href="#python" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Execute python code.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>code</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The python code to execute.</p>
              </div>
            </li>
            <li>
              <b><code>run_in_simulation</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether to execute this code in simulation mode (Default false).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Variables of previous filters are available, but you have to use the normal python
dictionary syntax <code>x = regex["my_group"]</code>.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Python</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute python code.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        code (str): The python code to execute.</span>
<span class="sd">        run_in_simulation (bool):</span>
<span class="sd">            Whether to execute this code in simulation mode (Default false).</span>

<span class="sd">    Variables of previous filters are available, but you have to use the normal python</span>
<span class="sd">    dictionary syntax `x = regex[&quot;my_group&quot;]`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">run_in_simulation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__usercode__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">print</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">simulate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_in_simulation</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span>
                <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;** Code not run in simulation. **&quot;</span><span class="p">,</span>
                <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warn&quot;</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">def</span> <span class="nf">_output_msg</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">,</span> <span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            the print function for the use code needs to print via the current output</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="si">}{</span><span class="n">end</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># codegen the user function with arguments as available in the resource</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">func</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;def __userfunc(print, </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">func</span> <span class="o">+=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="s2">&quot;    &quot;</span><span class="p">)</span>
        <span class="n">func</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">self.__usercode__ = __userfunc&quot;</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usercode__</span><span class="p">(</span><span class="nb">print</span><span class="o">=</span><span class="n">_output_msg</span><span class="p">,</span> <span class="o">**</span><span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>

        <span class="c1"># deep merge the resulting dict</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The python code must return None or a dict&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">res</span><span class="o">.</span><span class="n">deep_merge</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">action_config</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<p>A basic example that shows how to get the current file path and do some printing in a
for loop. The <code>|</code> is yaml syntax for defining a string literal spanning multiple lines.</p>
<pre><code class="language-yaml">rules:
  - locations: &quot;~/Desktop&quot;
    actions:
      - python: |
          print('The path of the current file is %s' % path)
          for _ in range(5):
              print('Heyho, its me from the loop')
</code></pre>
<pre><code class="language-yaml">rules:
  - name: &quot;You can access filter data&quot;
    locations: ~/Desktop
    filters:
      - regex: '^(?P&lt;name&gt;.*)\.(?P&lt;extension&gt;.*)$'
    actions:
      - python: |
          print('Name: %s' % regex[&quot;name&quot;])
          print('Extension: %s' % regex[&quot;extension&quot;])
</code></pre>
<p>Running in simulation and <a href="../rules/#advanced-aliases">yaml aliases</a>:</p>
<pre><code class="language-yaml">my_python_script: &amp;script |
  print(&quot;Hello World!&quot;)
  print(path)

rules:
  - name: &quot;Run in simulation and yaml alias&quot;
    locations:
      - ~/Desktop/
    actions:
      - python:
          code: *script
          run_in_simulation: yes
</code></pre>
<p>You have access to all the python magic -- do a google search for each
filename starting with an underscore:</p>
<pre><code class="language-yaml">rules:
  - locations: ~/Desktop
    filters:
      - name:
          startswith: &quot;_&quot;
    actions:
      - python: |
          import webbrowser
          webbrowser.open('https://www.google.com/search?q=%s' % name)
</code></pre>
<h2 id="rename">rename<a class="headerlink" href="#rename" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Renames a file.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The new name for the file / dir.</p>
              </div>
            </li>
            <li>
              <b><code>on_conflict</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>What should happen in case <strong>dest</strong> already exists.
One of <code>skip</code>, <code>overwrite</code>, <code>trash</code>, <code>rename_new</code> and <code>rename_existing</code>.
Defaults to <code>rename_new</code>.</p>
              </div>
            </li>
            <li>
              <b><code>rename_template</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A template for renaming the file / dir in case of a conflict.
Defaults to <code>{name} {counter}{extension}</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>The next action will work with the renamed file / dir.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/rename.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Rename</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Renames a file.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str):</span>
<span class="sd">            The new name for the file / dir.</span>

<span class="sd">        on_conflict (str):</span>
<span class="sd">            What should happen in case **dest** already exists.</span>
<span class="sd">            One of `skip`, `overwrite`, `trash`, `rename_new` and `rename_existing`.</span>
<span class="sd">            Defaults to `rename_new`.</span>

<span class="sd">        rename_template (str):</span>
<span class="sd">            A template for renaming the file / dir in case of a conflict.</span>
<span class="sd">            Defaults to `{name} {counter}{extension}`.</span>

<span class="sd">    The next action will work with the renamed file / dir.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">new_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">on_conflict</span><span class="p">:</span> <span class="n">ConflictMode</span> <span class="o">=</span> <span class="s2">&quot;rename_new&quot;</span>
    <span class="n">rename_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> </span><span class="si">{counter}{extension}</span><span class="s2">&quot;</span>
    <span class="c1"># TODO: keep_extension?</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rename&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_name</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_template</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">new_name</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_new_name</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The new name cannot contain slashes. &quot;</span>
                <span class="s2">&quot;To move files or folders use `move`.&quot;</span>
            <span class="p">)</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span>
        <span class="n">skip_action</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">resolve_conflict</span><span class="p">(</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">,</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">conflict_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_conflict</span><span class="p">,</span>
            <span class="n">rename_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">skip_action</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Renaming to </span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">dst</span>
        <span class="n">res</span><span class="o">.</span><span class="n">walker_skip_pathes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Convert all .PDF file extensions to lowercase (.pdf)&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - name
      - extension: PDF
    actions:
      - rename: &quot;{name}.pdf&quot;
</code></pre>
<pre><code class="language-yaml">rules:
  - name: &quot;Convert **all** file extensions to lowercase&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - name
      - extension
    actions:
      - rename: &quot;{name}.{extension.lower()}&quot;
</code></pre>
<h2 id="shell">shell<a class="headerlink" href="#shell" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Executes a shell command</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>cmd</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The command to execute.</p>
              </div>
            </li>
            <li>
              <b><code>run_in_simulation</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether to execute in simulation mode (default = false)</p>
              </div>
            </li>
            <li>
              <b><code>ignore_errors</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether to continue on returncodes != 0.</p>
              </div>
            </li>
            <li>
              <b><code>simulation_output</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The value of <code>{shell.output}</code> if run in simulation</p>
              </div>
            </li>
            <li>
              <b><code>simulation_returncode</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>The value of <code>{shell.returncode}</code> if run in simulation</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Returns</p>
<ul>
<li><code>{shell.output}</code> (<code>str</code>): The stdout of the executed process.</li>
<li><code>{shell.returncode}</code> (<code>int</code>): The returncode of the executed process.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>organize/actions/shell.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Shell</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a shell command</span>

<span class="sd">    Attributes:</span>
<span class="sd">        cmd (str): The command to execute.</span>
<span class="sd">        run_in_simulation (bool):</span>
<span class="sd">            Whether to execute in simulation mode (default = false)</span>
<span class="sd">        ignore_errors (bool):</span>
<span class="sd">            Whether to continue on returncodes != 0.</span>
<span class="sd">        simulation_output (str):</span>
<span class="sd">            The value of `{shell.output}` if run in simulation</span>
<span class="sd">        simulation_returncode (int):</span>
<span class="sd">            The value of `{shell.returncode}` if run in simulation</span>

<span class="sd">    Returns</span>

<span class="sd">    - `{shell.output}` (`str`): The stdout of the executed process.</span>
<span class="sd">    - `{shell.returncode}` (`int`): The returncode of the executed process.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">run_in_simulation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">simulation_output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;** simulation **&quot;</span>
    <span class="n">simulation_returncode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;shell&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cmd</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_simulation_output</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulation_output</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">full_cmd</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_in_simulation</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$ </span><span class="si">{</span><span class="n">full_cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">call</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="n">full_cmd</span><span class="p">,</span>
                    <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                    <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">,</span>
                    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_errors</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">e</span>

            <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">action_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">call</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span>
                <span class="s2">&quot;returncode&quot;</span><span class="p">:</span> <span class="n">call</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span>
                <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;** not run in simulation ** $ </span><span class="si">{</span><span class="n">full_cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">res</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">action_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_simulation_output</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">()),</span>
                <span class="s2">&quot;returncode&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_returncode</span><span class="p">,</span>
            <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;On macOS: Open all pdfs on your desktop&quot;
    locations: &quot;~/Desktop&quot;
    filters:
      - extension: pdf
    actions:
      - shell: 'open &quot;{path}&quot;'
</code></pre>
<h2 id="symlink">symlink<a class="headerlink" href="#symlink" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Create a symbolic link.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dest</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The symlink destination. If <strong>dest</strong> ends with a slash `/``, create the
symlink in the given directory. Can contain placeholders.</p>
              </div>
            </li>
            <li>
              <b><code>on_conflict</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>What should happen in case <strong>dest</strong> already exists.
One of <code>skip</code>, <code>overwrite</code>, <code>trash</code>, <code>rename_new</code> and <code>rename_existing</code>.
Defaults to <code>rename_new</code>.</p>
              </div>
            </li>
            <li>
              <b><code>rename_template</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A template for renaming the file / dir in case of a conflict.
Defaults to <code>{name} {counter}{extension}</code>.</p>
              </div>
            </li>
            <li>
              <b><code>autodetect_folder</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>In case you forget the ending slash "/" to indicate creating the
link inside the destination folder this settings will handle targets
without a file extension as folders.  If you really mean to copy to
a file without file extension, set this to false.
Default: true</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/actions/symlink.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Symlink</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a symbolic link.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dest (str):</span>
<span class="sd">            The symlink destination. If **dest** ends with a slash `/``, create the</span>
<span class="sd">            symlink in the given directory. Can contain placeholders.</span>

<span class="sd">        on_conflict (str):</span>
<span class="sd">            What should happen in case **dest** already exists.</span>
<span class="sd">            One of `skip`, `overwrite`, `trash`, `rename_new` and `rename_existing`.</span>
<span class="sd">            Defaults to `rename_new`.</span>

<span class="sd">        rename_template (str):</span>
<span class="sd">            A template for renaming the file / dir in case of a conflict.</span>
<span class="sd">            Defaults to `{name} {counter}{extension}`.</span>

<span class="sd">        autodetect_folder (bool):</span>
<span class="sd">            In case you forget the ending slash &quot;/&quot; to indicate creating the</span>
<span class="sd">            link inside the destination folder this settings will handle targets</span>
<span class="sd">            without a file extension as folders.  If you really mean to copy to</span>
<span class="sd">            a file without file extension, set this to false.</span>
<span class="sd">            Default: true</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">on_conflict</span><span class="p">:</span> <span class="n">ConflictMode</span> <span class="o">=</span> <span class="s2">&quot;rename_new&quot;</span>
    <span class="n">rename_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> </span><span class="si">{counter}{extension}</span><span class="s2">&quot;</span>
    <span class="n">autodetect_folder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;symlink&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dest</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_template</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">rendered</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dest</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="n">dst</span> <span class="o">=</span> <span class="n">prepare_target_path</span><span class="p">(</span>
            <span class="n">src_name</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">rendered</span><span class="p">,</span>
            <span class="n">autodetect_folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autodetect_folder</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">skip_action</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">resolve_conflict</span><span class="p">(</span>
            <span class="n">dst</span><span class="o">=</span><span class="n">dst</span><span class="p">,</span>
            <span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">conflict_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_conflict</span><span class="p">,</span>
            <span class="n">rename_template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rename_template</span><span class="p">,</span>
            <span class="n">simulate</span><span class="o">=</span><span class="n">simulate</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">skip_action</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Creating symlink at </span><span class="si">{</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">walker_skip_pathes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">dst</span><span class="o">.</span><span class="n">symlink_to</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">target_is_directory</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">is_dir</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><h2 id="trash">trash<a class="headerlink" href="#trash" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Move a file or dir into the trash.</p>

            <details class="quote">
              <summary>Source code in <code>organize/actions/trash.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Trash</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Move a file or dir into the trash.&quot;&quot;&quot;</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;trash&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Does not support standalone mode&quot;</span>
        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Trash &quot;</span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="n">trash</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples:</strong></p>
<pre><code class="language-yaml">rules:
  - name: Move all JPGs and PNGs on the desktop which are older than one year into the trash
    locations: &quot;~/Desktop&quot;
    filters:
      - lastmodified:
          years: 1
          mode: older
      - extension:
          - png
          - jpg
    actions:
      - trash
</code></pre>
<h2 id="write">write<a class="headerlink" href="#write" title="Permanent link">#</a></h2>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>Write text to a file.</p>
<p>If the specified path does not exist it will be created.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>text</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The text that should be written. Supports templates.</p>
              </div>
            </li>
            <li>
              <b><code>outfile</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The file <code>text</code> should be written into. Supports templates.</p>
              </div>
            </li>
            <li>
              <b><code>mode</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Can be either <code>append</code> (append text to the file), <code>prepend</code> (insert text as
first line) or <code>overwrite</code> (overwrite content with text).
Defaults to <code>append</code>.</p>
              </div>
            </li>
            <li>
              <b><code>encoding</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The text encoding to use. Default: "utf-8".</p>
              </div>
            </li>
            <li>
              <b><code>newline</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>(Optional) Whether to append a newline to the given <code>text</code>.
Defaults to <code>true</code>.</p>
              </div>
            </li>
            <li>
              <b><code>clear_before_first_write</code></b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>(Optional) Clears the file before first appending / prepending text to it.
This happens only the first time the file is written to. If the rule filters
don't match anything the file is left as it is.
Defaults to <code>false</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>organize/actions/write.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">coerce_numbers_to_str</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s2">&quot;forbid&quot;</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Write</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write text to a file.</span>

<span class="sd">    If the specified path does not exist it will be created.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        text (str):</span>
<span class="sd">            The text that should be written. Supports templates.</span>

<span class="sd">        outfile (str):</span>
<span class="sd">            The file `text` should be written into. Supports templates.</span>

<span class="sd">        mode (str):</span>
<span class="sd">            Can be either `append` (append text to the file), `prepend` (insert text as</span>
<span class="sd">            first line) or `overwrite` (overwrite content with text).</span>
<span class="sd">            Defaults to `append`.</span>

<span class="sd">        encoding (str):</span>
<span class="sd">            The text encoding to use. Default: &quot;utf-8&quot;.</span>

<span class="sd">        newline (str):</span>
<span class="sd">            (Optional) Whether to append a newline to the given `text`.</span>
<span class="sd">            Defaults to `true`.</span>

<span class="sd">        clear_before_first_write (bool):</span>
<span class="sd">            (Optional) Clears the file before first appending / prepending text to it.</span>
<span class="sd">            This happens only the first time the file is written to. If the rule filters</span>
<span class="sd">            don&#39;t match anything the file is left as it is.</span>
<span class="sd">            Defaults to `false`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">outfile</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;append&quot;</span><span class="p">,</span> <span class="s2">&quot;prepend&quot;</span><span class="p">,</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>
    <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span>
    <span class="n">newline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">clear_before_first_write</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">action_config</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ActionConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">ActionConfig</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">,</span>
        <span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_known_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="n">Output</span><span class="p">,</span> <span class="n">simulate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>

        <span class="n">resolved</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">resolved</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_known_files</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_known_files</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">resolved</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
                <span class="n">resolved</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># clear on first write</span>
            <span class="k">if</span> <span class="n">resolved</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">clear_before_first_write</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Clearing file </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
                    <span class="n">resolved</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>  <span class="c1"># clear the file</span>

        <span class="n">output</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="n">res</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s1"> &quot;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">simulate</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;append&quot;</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;prepend&quot;</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="n">content</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
                <span class="n">path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">text</span> <span class="o">+</span> <span class="n">content</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">:</span>
                <span class="n">path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div><p><strong>Examples</strong></p>
<pre><code class="language-yaml">rules:
  - name: &quot;Record file sizes&quot;
    locations: ~/Downloads
    filters:
      - size
    actions:
      - write:
          outfile: &quot;./sizes.txt&quot;
          text: &quot;{size.traditional} -- {relative_path}&quot;
          mode: &quot;append&quot;
          clear_before_first_write: true
</code></pre>
<p>This will create a file <code>sizes.txt</code> in the current working folder which contains the
filesizes of everything in the <code>~/Downloads</code> folder:</p>
<pre><code>2.9 MB -- SIM7600.pdf
1.0 MB -- Bildschirmfoto 2022-07-05 um 10.43.16.png
5.9 MB -- Albumcover.png
51.2 KB -- Urlaubsantrag 2022-04-19.pdf
1.8 MB -- ETH_USB_HUB_HAT.pdf
2.1 MB -- ArduinoDUE_V02g_sch.pdf
...
</code></pre>
<p>You can use templates both in the text as well as in the textfile parameter:</p>
<pre><code class="language-yaml">rules:
  - name: &quot;File sizes by extension&quot;
    locations: ~/Downloads
    filters:
      - size
      - extension
    actions:
      - write:
          outfile: &quot;./sizes.{extension}.txt&quot;
          text: &quot;{size.traditional} -- {relative_path}&quot;
          mode: &quot;prepend&quot;
          clear_before_first_write: true
</code></pre>
<p>This will separate the filesizes by extension.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../filters/" class="btn btn-neutral float-left" title="Filters"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../changelog/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tfeldmann/organize/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../filters/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../changelog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
